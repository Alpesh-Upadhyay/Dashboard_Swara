<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Dashboard</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/stackmob-js-0.8.0-bundled-min.js"></script>


 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
 <link rel="stylesheet" href= "http://code.jquery.com/ui/1.10.2/themes/dark-hive/jquery-ui.css" />
<!-- <link rel="stylesheet" href= "http://code.jquery.com/ui/1.10.2/themes/redmond/jquery-ui.css" />-->
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-modal.js"></script>
 <script type="text/javascript" src="style/js/bootstrap.js"></script>
 
<link type="text/css" rel="stylesheet" href="style/css/bootstrap.css"></link>
<script type="text/javascript">
StackMob.init({
    appName: "swara_sangam",
    clientSubdomain: "ankitguptamixorgcom",
    publicKey: "a21c4638-f221-4a70-925b-65cc30de4c30",
    apiVersion: 0,
	 userSchema: 'organization_login',
	    loginField: 'organization_id',
	    passwordField: 'password',
});
</script>

</script><script type="text/javascript">
/**
 * This code declares your class and saves an object "blogentry" to the table on StackMob.
 * StackMob will create the table for you automatically based on your JSON.
 */
var device = StackMob.Model.extend({ schemaName: 'device' });
var mydevice = new device({ });
var q = new StackMob.Collection.Query();
q.orderDesc('lastmoddate');
mydevice.query(q,{
	success:function(model) {
						array = model.toJSON();
						//console.debug(array);
						var key;
						var count = 0;
						for(key in array) {
							 if(array.hasOwnProperty(key)) {
							  count ++;
							 }
						 }
						 //alert(count);
						$(".count").html("count:"+ count +'<br/><tr/>');
						for(var i=0; i<=count; i++)
						{
							//console.debug(array[i].user_name);
							//$(".data1").append("user_name:"+ array[i].user_name +"<br/>");
	                        $("#ui").append("<tr><td>"+array[i].device_IMEI +"</td><td>"+array[i].device_model+"</td><td>"+array[i].device_petName+"</td><td >"+array[i].device_org+"</td></tr>");
	                       /* $("#device_modal").append(array[i].device_modal+"<br/></tr>");
	
	                        $("#device_petName").append(array[i].device_petName+"<br/></tr>");
	                        $("#device").append(array[i].device+ "<br/></tr>");
							*/
						}
					
    }
});

</script>
<style>
				 #footer {
	 width: 100%;
position: fixed;
bottom: 0px;
background-color: #000;
height: auto;
}
.container .credit {
float: right;
margin: 10px 0;
}
.muted {
color: #999999;
}
		.ui-dialog .ui-dialog-title {

font-weight: bold;
font-size: 18px;
}
.ui-dialog .ui-dialog-buttonpane {
font-size: 14px;
}
		.content
		{
		display:none;
		}
		.ui-dialog-titlebar-close {
  visibility: hidden;
}
.active
{
padding-top:0px;
}
.navbar .nav > li {

padding-top:0px;
}

		</style>
		</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
          <a class="brand" href="">Swara<img src="style/img/swara_icon.jpg" width="26" height="26"/>Dashboard</a>
          <div class="nav-collapse collapse pull-right">
            <ul class="nav">
              <li class="" id="home">
                <a href="index.html">HOME</a>
              </li>
              <li class="" id="inbox">
                <a href="inbox.html">INBOX </a>
              </li>
              <li class="" id="settings">
                <a href="settings.html">SETTINGS</a>
              </li>
			  <li class="active">
                <a href="device.html">DEVICE</a>
              </li>
              <li class="" id="logout_btn">
                <a id="logout" href="#LOGOUT">LOGOUT</a>

              </li>
            </ul>
          </div>
		  <div id="dialog-confirm"  title="Logout" style="font-size:14px;"><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>Do you really want to Logout??? </div> 
        </div>
      </div>
	<header class="jumbotron subhead" style="height:45px;"></header>
<div class="device"  style='' >
  <div class="modal-header">
	
            <h3 id="myModalLabel"> Devices Information</h3>
    </div>
    <div class="modal-body" style=''>
<table  class="data  table-bordered table table-striped" id="ui">
	<tr>
		<th>Device-IMEI</th>

		<th>Device-Model</th>
		<th>Device_petname</th>
		<th>Device_org</th>
		
	</tr>
	</table>
</div>
<div class="modal-footer">
	</div>
</div>
<div id="footer">
      <div class="container">
        <p class="muted credit">Design and Developed by <a href="http://mixorg.com">MIXORG</a> </p>
      </div>
    </div>
<script type="text/javascript">
$(function(){
//onload validation
var username=localStorage.getItem("stackmob.oauth2.user");
//alert(username);
StackMob.isLoggedIn({
  yes: function(username){
    console.log(username + " is logged in.");
  },
  no: function(){
   // console.log("No one is currently logged in.");
   window.location="login.html";
  }
});
  





$("#logout").click(function(e){
$( "#dialog-confirm" ).dialog( "open" );
});

var User = StackMob.Model.extend({ schemaName: 'organization_login' });		
var user = new StackMob.User({ organization_id: localStorage.getItem("stackmob.oauth2.user") });
$( "#dialog-confirm" ).dialog({
 
	 autoOpen: false,
      resizable: true,
      height:160,
      modal: true,
      buttons: {
        "YES": function() {
		user.logout({
  success: function(model) {
    //show a success message/update your UI
		window.location="login.html"
  }, 
  error: function(model, response) {
    //show a failure message in your app    
	alert("error");
  }
});
          $( this ).dialog( "close" );
        },
        "NO": function() {
          $( this ).dialog( "close" );
		
        }
      }
    });


 

});

</script>

</body>
<html>