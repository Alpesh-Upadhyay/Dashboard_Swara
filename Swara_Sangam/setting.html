<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/stackmob-js-0.8.0-bundled-min.js"></script>
</head>


<script type="text/javascript">
StackMob.init({
    appName: "swara_sangam",
    clientSubdomain: "ankitguptamixorgcom",
    publicKey: "a21c4638-f221-4a70-925b-65cc30de4c30",
    apiVersion: 0
});
</script>


<body>
 
<table>
  <tr>
    <td>Update Org Logo</td>
    <td><input type="file" id="files" name="files[]" /></td>
	<td> <input type="Button"  id="button" data-role="button" value="save"></td>
  </tr>
</table>

 
<script type="text/javascript">

var organization = StackMob.Model.extend({
    schemaName: 'organization'
  });
 
  var organizationInstance = new organization({ organization_id: '1' });
  var fieldname = 'org_logo'; //name of binary field that you created in your schema
  
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object
 
    // Loop through the FileList
    for (var i = 0, f; f = files[i]; i++) {
 
      var reader = new FileReader();
 
      // Closure to capture the file information
      reader.onload = (function(theFile) {
        return function(e) {
 
          /*
            e.target.result will return "data:image/jpeg;base64,[base64 encoded data]...".
            We only want the "[base64 encoded data] portion, so strip out the first part
          */
          var base64Content = e.target.result.substring(e.target.result.indexOf(',') + 1, e.target.result.length);
          var fileName = theFile.name;
          var fileType = theFile.type;
 
          organizationInstance.setBinaryFile(fieldname, fileName, fileType, base64Content);
		  organizationInstance.save();
		  alert("save");
        };
      })(f);
 
      // Read in the file as a data URL
      fileContent = reader.readAsDataURL(f);
 
    }
  }
 
  document.getElementById('files').addEventListener('change', handleFileSelect, false);


</script>
 
</body>
</html>